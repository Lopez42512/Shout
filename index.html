<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./assets/css/style.css">
  <title>Shout!</title>
</head>

<body>

  <!-- map div -->

  <div class="container">
    <h1>Google Map</h1>
    <div id="map"> </div>
    <button class="button" id="getGeoLocation">Geo Location</button>
  </div>


  <!-- Scripts -->

  <script>
    function initMap() {
      //fixed place for now
      var place = {
        zoom: 18,
        center: {
          lat: 42,
          lng: -71
        }
      }
      //new map
      var map = new google.maps.Map(document.getElementById("map"), place);

      //Array of Users

      var allUsers = [

        firstUser = {
          coords: {
            lat: 42,
            lng: -71
          },
          iconImage: "./assets/images/map-icon.png",
          content: "<h1>Hello Friends!</h1>"
        }

      ]

      console.log(allUsers);
      //loop through markers
      for (var i = 0; i < allUsers.length; i++) {
        addUserMarker(allUsers[i]);
      }


      //function Marker
      function addUserMarker(user) {
        //Add marker
        var marker = new google.maps.Marker({
          position: user.coords,
          map: map,

        });

        console.log(user.coords);

        //if user has an Icon
        if (user.iconImage) {
          //set Icon image
          marker.setIcon(user.iconImage);
        }

        // if it contains infoWindow text then create one
        if (user.content) {

          //infoWindow is a pop up for the onClick
          var infoWindow = new google.maps.InfoWindow({
            content: user.content
          });

        }

        marker.addListener("click", () => {

          infoWindow.open(map, marker);
        });

      }



    }
  </script>

  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6JIwfy4q8P_mFaKEhDn2AnJ6e6-mpctc&callback=initMap">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase.js"></script>
  <script src="./assets/javascript/main.js"></script>

</body>

</html>